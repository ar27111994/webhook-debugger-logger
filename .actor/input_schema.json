{
  "title": "Webhook Debugger & Logger",
  "description": "Powerful tool to test, debug, and log incoming webhooks in real-time.",
  "type": "object",
  "schemaVersion": 1,
  "properties": {
    "section_urls": {
      "title": "üåê Dynamic Endpoint Setup",
      "type": "string",
      "sectionCaption": "Webhook Generation",
      "sectionDescription": "Quickly create unique, temporary endpoints to capture incoming data from any source.",
      "description": "Configuration for generated URLs.",
      "editor": "hidden"
    },
    "urlCount": {
      "type": "integer",
      "title": "Number of Endpoints",
      "description": "How many unique webhook URLs to generate for this run (1-10). Default is 3.",
      "minimum": 1,
      "maximum": 10,
      "default": 3,
      "prefill": 3,
      "editor": "number"
    },
    "replayMaxRetries": {
      "type": "integer",
      "title": "Replay Max Retries",
      "description": "Maximum number of retry attempts for failed replay requests. Default is 3.",
      "minimum": 0,
      "maximum": 10,
      "default": 3,
      "prefill": 3,
      "editor": "number"
    },
    "replayTimeoutMs": {
      "type": "integer",
      "title": "Replay Timeout (ms)",
      "description": "Timeout for each replay attempt in milliseconds. Default is 10000 (10s).",
      "minimum": 1000,
      "maximum": 60000,
      "default": 10000,
      "prefill": 10000,
      "editor": "number"
    },
    "retentionHours": {
      "type": "integer",
      "title": "Retention Window (Hours)",
      "description": "How long to keep your webhook URLs active (1-72 hours). Note: Logs for expired webhooks are filtered out from the '/logs' endpoint.",
      "minimum": 1,
      "maximum": 72,
      "default": 24,
      "prefill": 24,
      "editor": "number"
    },
    "section_limits": {
      "type": "string",
      "title": "üõ°Ô∏è Traffic & Payload Controls",
      "sectionCaption": "Stability & Scaling",
      "sectionDescription": "Protect your Actor from traffic spikes by defining payload and parsing limits.",
      "description": "Safety and parsing controls.",
      "editor": "hidden"
    },
    "maxPayloadSize": {
      "type": "integer",
      "title": "Max Body Size (Bytes)",
      "description": "Maximum allowed size for the incoming request body. Defaults to 10MB. Requests exceeding this will be rejected with 413.",
      "minimum": 1024,
      "maximum": 104857600,
      "default": 10485760,
      "prefill": 10485760,
      "editor": "number"
    },
    "enableJSONParsing": {
      "type": "boolean",
      "title": "Auto-Parse JSON Payloads",
      "description": "If enabled, the Actor will automatically convert 'application/json' bodies into searchable dataset objects.",
      "default": true,
      "editor": "checkbox"
    },
    "section_v2_security": {
      "title": "üîë Enterprise-Grade Security",
      "type": "string",
      "sectionCaption": "Access Control",
      "sectionDescription": "Secure your endpoints with API keys, IP whitelisting, and automated data masking.",
      "description": "Security settings.",
      "editor": "hidden"
    },
    "maskSensitiveData": {
      "type": "boolean",
      "title": "Mask Authentication Headers",
      "description": "Automatically redact 'Authorization' and 'Cookie' headers from logs to ensure compliance and privacy.",
      "default": true,
      "editor": "checkbox"
    },
    "rateLimitPerMinute": {
      "type": "integer",
      "title": "Management Rate Limit",
      "description": "Maximum requests per minute for management endpoints (/logs, /info, /replay). Applied per client IP.",
      "minimum": 1,
      "maximum": 1000,
      "default": 60,
      "prefill": 60,
      "editor": "number"
    },
    "authKey": {
      "type": "string",
      "title": "Global API Key",
      "description": "Secure all incoming requests. Senders must provide this key via 'Authorization: Bearer' or '?key='.",
      "isSecret": true,
      "example": "my-secret-key-123",
      "editor": "textfield"
    },
    "allowedIps": {
      "type": "array",
      "title": "IP Whitelist (CIDR)",
      "description": "Only accept traffic from these specific IPs or CIDR blocks. Leave blank for public access.",
      "editor": "stringList"
    },
    "signatureVerification": {
      "type": "object",
      "title": "Webhook Signature Verification",
      "description": "Verify incoming webhook signatures from providers like Stripe, Shopify, GitHub, or Slack.",
      "properties": {
        "provider": {
          "type": "string",
          "title": "Provider",
          "description": "Webhook provider for signature verification.",
          "enum": ["stripe", "shopify", "github", "slack", "custom"],
          "editor": "select"
        },
        "secret": {
          "type": "string",
          "title": "Signing Secret",
          "description": "The webhook signing secret from your provider.",
          "isSecret": true,
          "editor": "textfield"
        },
        "headerName": {
          "type": "string",
          "title": "Custom Header Name",
          "description": "(Custom Provider Only) The header containing the signature.",
          "editor": "textfield"
        },
        "timestampKey": {
          "type": "string",
          "title": "Timestamp Header Name",
          "description": "(Custom Provider Only) The header containing the timestamp for replay protection.",
          "editor": "textfield"
        },
        "algorithm": {
          "type": "string",
          "title": "Hash Algorithm",
          "description": "(Custom Provider Only) The HMAC algorithm (sha256 or sha1).",
          "enum": ["sha256", "sha1"],
          "default": "sha256",
          "editor": "select"
        },
        "encoding": {
          "type": "string",
          "title": "Signature Encoding",
          "description": "(Custom Provider Only) The encoding of the signature string.",
          "enum": ["hex", "base64"],
          "default": "hex",
          "editor": "select"
        },
        "tolerance": {
          "type": "integer",
          "title": "Timestamp Tolerance (seconds)",
          "description": "Maximum age of request timestamp for replay protection (default: 300).",
          "minimum": 60,
          "maximum": 3600,
          "default": 300,
          "editor": "number"
        }
      },
      "editor": "json"
    },
    "section_alerting": {
      "title": "üîî Alerting & Notifications",
      "type": "string",
      "sectionCaption": "Real-time Alerts",
      "sectionDescription": "Get notified when webhooks fail or require attention.",
      "description": "Alerting configuration.",
      "editor": "hidden"
    },
    "alerts": {
      "type": "object",
      "title": "Alert Configuration",
      "description": "Configure Slack or Discord notifications for webhook events.",
      "properties": {
        "slack": {
          "type": "object",
          "title": "Slack",
          "properties": {
            "webhookUrl": {
              "type": "string",
              "title": "Slack Webhook URL",
              "description": "Slack incoming webhook URL for notifications.",
              "editor": "textfield"
            }
          }
        },
        "discord": {
          "type": "object",
          "title": "Discord",
          "properties": {
            "webhookUrl": {
              "type": "string",
              "title": "Discord Webhook URL",
              "description": "Discord webhook URL for notifications.",
              "editor": "textfield"
            }
          }
        }
      },
      "editor": "json"
    },
    "alertOn": {
      "type": "array",
      "title": "Alert Triggers",
      "description": "When to send alerts: error, 4xx, 5xx, timeout, signature_invalid",
      "default": ["error", "5xx"],
      "prefill": ["error", "5xx"],
      "editor": "stringList"
    },
    "section_v2_response": {
      "title": "üé≠ API Mocking & Latency",
      "type": "string",
      "sectionCaption": "Response Simulation",
      "sectionDescription": "Simulate real-world API behaviors by customizing the responses sent back to the source.",
      "description": "Response settings.",
      "editor": "hidden"
    },
    "defaultResponseCode": {
      "type": "integer",
      "title": "HTTP Status Code",
      "description": "Default code to return (200, 201, etc). Use the '__status' query on webhooks to override dynamically.",
      "minimum": 100,
      "maximum": 599,
      "default": 200,
      "prefill": 200,
      "editor": "number"
    },
    "defaultResponseBody": {
      "type": "string",
      "title": "Custom Body Payload",
      "description": "The exact data to return to the sender. Supports JSON, XML, or plain text strings.",
      "example": "{\"status\": \"received\", \"success\": true}",
      "prefill": "{\"status\": \"success\", \"message\": \"Webhook captured!\"}",
      "editor": "textarea"
    },
    "defaultResponseHeaders": {
      "type": "object",
      "title": "Custom HTTP Headers",
      "description": "Define extra headers (e.g., {'X-Custom': 'Value'}) to include in EVERY webhook response.",
      "editor": "json"
    },
    "responseDelayMs": {
      "type": "integer",
      "title": "Network Latency (ms)",
      "description": "Simulate slow internet or busy servers by delaying the response (0-10,000ms).",
      "minimum": 0,
      "maximum": 10000,
      "default": 0,
      "editor": "number"
    },
    "section_v2_workflows": {
      "title": "üîÑ Smart Data Workflows",
      "type": "string",
      "sectionCaption": "Automation",
      "sectionDescription": "Trigger events and validate data immediately as it lands on your endpoints.",
      "description": "Workflow settings.",
      "editor": "hidden"
    },
    "forwardUrl": {
      "type": "string",
      "title": "Automated Pipe URL",
      "description": "Immediately POST a copy of every captured request to this destination URL.",
      "example": "https://your-server.com/ingest",
      "editor": "textfield"
    },
    "forwardHeaders": {
      "type": "boolean",
      "title": "Pass Original Headers",
      "description": "If enabled, all incoming headers will be forwarded to the destination. Disable this to send a 'clean' request (Type/Length only).",
      "default": true,
      "editor": "checkbox"
    },
    "maxForwardRetries": {
      "type": "integer",
      "title": "Forward Max Retries",
      "description": "Maximum number of retry attempts for failed forward requests. Default is 3.",
      "minimum": 0,
      "maximum": 10,
      "default": 3,
      "prefill": 3,
      "editor": "number"
    },
    "jsonSchema": {
      "type": "string",
      "title": "JSON Schema Guard",
      "description": "Enforce strict payload structure. Invalid requests will be rejected with a 400 Bad Request.",
      "example": "{\n  \"type\": \"object\",\n  \"required\": [\"userId\"],\n  \"properties\": {\n    \"userId\": { \"type\": \"string\" }\n  }\n}",
      "prefill": "{\n  \"type\": \"object\",\n  \"required\": [\"event\"],\n  \"properties\": {\n    \"event\": { \"type\": \"string\" }\n  }\n}",
      "editor": "textarea"
    },
    "customScript": {
      "type": "string",
      "title": "Transformation Logic (JS)",
      "description": "JavaScript snippet to clean or transform the event before storage. Args: { event, req }.",
      "example": "event.body = JSON.parse(event.body);\nevent.headers['x-custom'] = 'modified';",
      "prefill": "// Example: Parse body and add a custom flag\nif (event.contentType === 'application/json') {\n    const body = JSON.parse(event.body);\n    event.body = { ...body, _debug: true };\n}",
      "editor": "javascript"
    },
    "testAndExit": {
      "type": "boolean",
      "title": "Automated QA Mode",
      "description": "Internal test flag: enables immediate exit after healthy startup.",
      "default": false,
      "editor": "hidden"
    }
  },
  "required": []
}
